package com.kindustry.common.http;import java.io.IOException;import java.util.Iterator;import java.util.Map;import java.util.Map.Entry;import net.sf.json.JSONArray;import net.sf.json.JSONObject;import org.jsoup.Connection;import org.jsoup.helper.HttpConnection;import org.jsoup.nodes.Document;/** *  * @author InJavaWeTrust *  */public class JsoupUtil {  /**   *    * 抓取网页 内容   */  public static Document getWebDocument(String url) {    Document doc = null;    try {      Connection connect = HttpConnection.connect(url);      // Connection connect = Jsoup.connect(url);      // connect.timeout(timeout);      connect.header("Accept-Encoding", "gzip,deflate,sdch");      connect.header("Connection", "close");      connect.validateTLSCertificates(false);      connect.maxBodySize(10 * 1024 * 1024); // 设置最大 10M jsoup 默许抓取页面大小为1M      doc = connect.get();    } catch (IOException e) {      e.printStackTrace();    }    return doc;  }  /**   *    * 抓取网页 内容   *     *    {"year":"2010","season":4}   */  public static Document getWebDocument(String url, String jsonParam) {    Document doc = null;    try {      Connection connect = HttpConnection.connect(url);      // Connection connect = Jsoup.connect(url);      // connect.timeout(timeout);      connect.header("Accept-Encoding", "gzip,deflate,sdch");      connect.header("Connection", "close");      connect.validateTLSCertificates(false);      // 参数      JSONObject jsonObj = JSONObject.fromObject(jsonParam);      // 遍历生成参数      if (jsonObj != null) {        Iterator<String> it = jsonObj.keys();        while (it.hasNext()) {          String key = it.next();          connect.data(key, jsonObj.getString(key));        }      }      connect.maxBodySize(10 * 1024 * 1024); // 设置最大 10M jsoup 默许抓取页面大小为1M      doc = connect.post();    } catch (IOException e) {      e.printStackTrace();    }    return doc;  }  public static Document httpPost(String url, Map<String, String> map) {    Document doc = null;    try {      // 获取请求连接      Connection connect = HttpConnection.connect(url);      // 请求头设置，特别是cookie设置      connect.header("Accept", "text/html, application/xhtml+xml, */*");      connect.header("Content-Type", "application/x-www-form-urlencoded");      connect.header("User-Agent", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0))");      // connect.timeout(timeout);//      connect.header("Accept-Encoding", "gzip,deflate,sdch");//      connect.header("Connection", "close");//      connect.validateTLSCertificates(false);      // 遍历生成参数      if (map != null) {        for (Entry<String, String> entry : map.entrySet()) {          connect.data(entry.getKey(), entry.getValue());        }      }      connect.maxBodySize(10 * 1024 * 1024); // 设置最大 10M jsoup 默许抓取页面大小为1M      doc = connect.post();    } catch (IOException e) {      e.printStackTrace();    }    return doc;  }}